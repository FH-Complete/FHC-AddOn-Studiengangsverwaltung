<div class="contentWrapper" ng-controller="StplLehrveranstaltungCtrl as stplCtrl">
	<div id="stplTree">
		<table id="stplTreeGrid" class="easyui-treegrid" 
			   data-options="
					url: '',
					method: 'get',
					rownumbers: true,
					idField: 'id',
					treeField: 'name',
					fit: true,
					onContextMenu: function(e ,row)
					{
						if (row){
							console.log(row);
							console.log($(this).treegrid('select', row.id));
							e.preventDefault();
							$(this).treegrid('select', row.id);
							$('#stplTreeGridContextMenu').menu('show');
							$('#stplTreeGridContextMenu').menu('show',{
								left: e.pageX,
								top: e.pageY
							});                
						}
					}
				">
			<thead>
				<tr>
					<th data-options="field: 'name'" width="300">Lehrveranstaltung</th>
					<th data-options="field: 'ects',align: 'right'">ECTS</th>
					<th data-options="field: 'semesterstunden',align: 'right'">Semesterstunden</th>
					<th data-options="field: 'lehrform',align: 'right'">Lehrform</th>
					<th data-options="field: 'lvnr',align: 'right'">LVNR</th>
				</tr>
			</thead>
		</table>
		<div id="stplTreeGridContextMenu" class="easyui-menu" style="width:120px;">
			<div ng-click='stplCtrl.removeStudienplanLehrveranstaltung()' data-options="iconCls:'icon-remove'">Remove</div>
		</div>
	</div>
	<div id="lvTree">
		<div id="stplLvFilter">
			<div class="col-sm-10">
				<div class="form-group form-group-sm">
					<label for="oe">Organisationseinheit</label>
					<select id="oe" class="form-control input-sm" name="oe" ng-model="stplCtrl.oe_kurzbz">
						<option ng-repeat="oe in stplCtrl.oeList" value="{{oe.oe_kurzbz}}">{{oe.organisationseinheittyp_kurzbz}} - {{oe.bezeichnung}}</option>
					</select></br>
				</div>
			</div>
			<div class="col-sm-5">
				<div class="form-group form-group-sm">
					<label for="lehrtyp">Lehrtyp</label>
					<select id="lehrtyp" class="form-control input-sm" name="lehrtyp" ng-model="stplCtrl.lehrtyp_kurzbz">
						<option ng-repeat="lehrtyp in stplCtrl.lehrtypList" value="{{lehrtyp.lehrtyp_kurzbz}}">{{lehrtyp.bezeichnung}}</option>
					</select>
				</div>
			</div>
			<div class="col-sm-3">
				<div class="form-group form-group-sm">
					<label for="semester">Semester</label>
					<select id="semester" class="form-control input-sm" name="semester" ng-model="stplCtrl.semester">
						<option ng-repeat="sem in stplCtrl.semesterList" value="{{sem.key}}">{{sem.value}}</option>
					</select>
				</div>
			</div>
			<div class="col-sm-2">
				<div class="form-group form-group-sm">
					<label>&nbsp;</label>
					<div>
						<button type="submit" class="btn btn-default btn-sm" ng-click="stplCtrl.loadLehrveranstaltungen()">Filtern</button>
					</div>
				</div>
			</div>
		</div>
		<table id="lvTreeGrid" class="easyui-treegrid" data-options="
					url: '',
					method: 'get',
					rownumbers: true,
					idField: 'id',
					treeField: 'name',
					fit: true
				">
			<thead>
				<tr>
					<th data-options="field: 'name'" width="250">Lehrveranstaltung</th>
					<th data-options="field: 'ects',align: 'right'">ECTS</th>
				</tr>
			</thead>
		</table>
	</div>
	<div id="lvMetadata">
		<span class="spanTitle">{{stplCtrl.meta.name}}</span></br>
		<span>ECTS: </span><span>{{stplCtrl.meta.ects}}</span></br>
		<span>Semesterstunden: </span><span>{{stplCtrl.meta.semesterstunden}}</span></br>
		<span>LVNR: </span><span>{{stplCtrl.meta.lvnr}}</span></br>
		<span>Lehrform: </span><span>{{stplCtrl.meta.lehrform}}</span>
	</div>
</div>